

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6. pypsi.core - Core classes for pluggable features &#8212; pypsi 1.4.1 documentation</title>
    
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7. pypsi.cmdline - User input processing" href="pypsi.cmdline.html" />
    <link rel="prev" title="5. pypsi.completers - Core tab completion functions" href="pypsi.completers.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pypsi.cmdline.html" title="7. pypsi.cmdline - User input processing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pypsi.completers.html" title="5. pypsi.completers - Core tab completion functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypsi 1.4.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6. pypsi.core - Core classes for pluggable features</a><ul>
<li><a class="reference internal" href="#command-objects">6.1. Command objects</a></li>
<li><a class="reference internal" href="#plugin-objects">6.2. Plugin objects</a></li>
<li><a class="reference internal" href="#argument-parsing">6.3. Argument parsing</a></li>
<li><a class="reference internal" href="#enhanced-printing">6.4. Enhanced Printing</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pypsi.completers.html"
                        title="previous chapter">5. pypsi.completers - Core tab completion functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pypsi.cmdline.html"
                        title="next chapter">7. pypsi.cmdline - User input processing</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pypsi.core.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pypsi.core">
<span id="pypsi-core-core-classes-for-pluggable-features"></span><h1>6. pypsi.core - Core classes for pluggable features<a class="headerlink" href="#module-pypsi.core" title="Permalink to this headline">¶</a></h1>
<p>Base classes for developing pluggable commands and plugins.</p>
<div class="section" id="command-objects">
<h2>6.1. Command objects<a class="headerlink" href="#command-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypsi.core.Command">
<em class="property">class </em><code class="descclassname">pypsi.core.</code><code class="descname">Command</code><span class="sig-paren">(</span><em>name</em>, <em>usage=None</em>, <em>brief=None</em>, <em>topic=None</em>, <em>parser=None</em>, <em>pipe='str'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A pluggable command that users can execute. All commands need to derive
from this class. When a command is executed by a user, the command&#8217;s
<a class="reference internal" href="#pypsi.core.Command.run" title="pypsi.core.Command.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> method will be called. The return value of the <a class="reference internal" href="#pypsi.core.Command.run" title="pypsi.core.Command.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a>
method is used when processing forthcoming commands in the active
statement. The return value must be an <code class="xref py py-class docutils literal"><span class="pre">int</span></code> and follows the Unix
standard: 0 on success, less than 0 on error, and greater than 0 given
invalid input or incorrect usage.</p>
<p>Each command has a topic associated with it. This topic can be referenced
by commands such as <a class="reference internal" href="pypsi.commands.html#pypsi.commands.help.HelpCommand" title="pypsi.commands.help.HelpCommand"><code class="xref py py-class docutils literal"><span class="pre">pypsi.commands.help.HelpCommand</span></code></a> to categorize
commands in help messages.</p>
<p>A command can be used as a fallback handler by implementing the
<a class="reference internal" href="#pypsi.core.Command.fallback" title="pypsi.core.Command.fallback"><code class="xref py py-meth docutils literal"><span class="pre">fallback()</span></code></a> method. This is similar to the <a class="reference internal" href="#pypsi.core.Command.run" title="pypsi.core.Command.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> method, except
that is accepts one more argument: the command name to execute that wasn&#8217;t
found by the shell. The return value of <a class="reference internal" href="#pypsi.core.Command.fallback" title="pypsi.core.Command.fallback"><code class="xref py py-meth docutils literal"><span class="pre">fallback()</span></code></a> holds the same
purpose as the return value of <a class="reference internal" href="#pypsi.core.Command.run" title="pypsi.core.Command.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a>.</p>
<p>By the time <a class="reference internal" href="#pypsi.core.Command.run" title="pypsi.core.Command.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> is called, the system streams have been updated to
point to the current file streams issued in the statement. For example, if
the statement redirects standard out (<code class="xref py py-attr docutils literal"><span class="pre">sys.stdout</span></code>) to a file, the
destination file is automatically opened and <code class="xref py py-attr docutils literal"><span class="pre">sys.stdout</span></code> is
redirected to the opened file stream. Once the command has complete
execution, the redirected stream is automatically closed and
<code class="xref py py-attr docutils literal"><span class="pre">sys.stdout</span></code> is set to its original stream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the name of the command which the user will reference
in the shell</li>
<li><strong>usage</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the usage message to be displayed to the user</li>
<li><strong>brief</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; a brief description of the command</li>
<li><strong>topic</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the topic that this command belongs to</li>
<li><strong>pipe</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the type of data that will be read from and written to
any pipes</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pypsi.core.Command.complete">
<code class="descname">complete</code><span class="sig-paren">(</span><em>shell</em>, <em>args</em>, <em>prefix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the user attempts a tab-completion action for this command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; the list of arguments, the last one containing the
cursor position</li>
<li><strong>prefix</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the prefix that all items returned must start with</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns list:</th><td class="field-body"><p class="first last">the list of strings that could complete the current
action</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Command.error">
<code class="descname">error</code><span class="sig-paren">(</span><em>shell</em>, <em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command.error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Display an error message to the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> &#8211; the error message to display</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Command.fallback">
<code class="descname">fallback</code><span class="sig-paren">(</span><em>shell</em>, <em>name</em>, <em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command.fallback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command.fallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when this command was set as the fallback command. The only
difference between this and <a class="reference internal" href="#pypsi.core.Command.run" title="pypsi.core.Command.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> is that this method accepts the
command name that was entered by the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the name of the command to run</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; arguments</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body"><p class="first last">0 on success, less than 0 on error, and greater than 0 on
invalid usage</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Command.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>shell</em>, <em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the command. All commands need to implement this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; list of string arguments</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body"><p class="first last">0 on success, less than 0 on error, and greater than 0 on
invalid usage</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Command.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>shell</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the plugin has been registered to the active shell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on error</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Command.usage_error">
<code class="descname">usage_error</code><span class="sig-paren">(</span><em>shell</em>, <em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Command.usage_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Command.usage_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Display an error message that indicates incorrect usage of this
command. After the error is displayed, the usage is printed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> &#8211; list of strings that are the error message</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="plugin-objects">
<h2>6.2. Plugin objects<a class="headerlink" href="#plugin-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypsi.core.Plugin">
<em class="property">class </em><code class="descclassname">pypsi.core.</code><code class="descname">Plugin</code><span class="sig-paren">(</span><em>preprocess=None</em>, <em>postprocess=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Plugin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A plugin is an object that is able to modify a
<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><code class="xref py py-class docutils literal"><span class="pre">pypsi.shell.Shell</span></code></a> object&#8217;s behavior. Whereas a command can be
execute from user input, the <cite>Plugin</cite> class does not contain a <cite>run()</cite>
function.</p>
<p>Constructor can take two parameters: <cite>preprocess</cite> and <cite>postprocess</cite>
These values determine where the plugin resides inside of the
preprocess and postprocess list. This list, inside of
<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><code class="xref py py-class docutils literal"><span class="pre">pypsi.shell.Shell</span></code></a>, is iterated sequentially, from most
priority to least. So, the highest priority value is 0, which means it
will be the first plugin to run, and the lowest value is 100, which
means it will be the last plugin to run. If either value is <cite>None</cite>, the
plugin is not added to the processing list. For example, if this plugin
only provides a preprocessing functionality, then postprocess should be
set to <code class="xref py py-const docutils literal"><span class="pre">None</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>preprocess</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; the preprocess priority</li>
<li><strong>postprocess</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; the postprocess priority</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pypsi.core.Plugin.on_input">
<code class="descname">on_input</code><span class="sig-paren">(</span><em>shell</em>, <em>line</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Plugin.on_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Plugin.on_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after input from the user has been received. The return value is
the preprocessed line. This means that modifying the line argument will
not populate back. If this function does no preprocessing, return line
unmodified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>line</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the current input statement string</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns str:</th><td class="field-body"><p class="first last">the preprocessed line</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Plugin.on_input_canceled">
<code class="descname">on_input_canceled</code><span class="sig-paren">(</span><em>shell</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Plugin.on_input_canceled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Plugin.on_input_canceled" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the user can canceled entering a statement via SIGINT
(Ctrl+C).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on error</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Plugin.on_statement_finished">
<code class="descname">on_statement_finished</code><span class="sig-paren">(</span><em>shell</em>, <em>rc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Plugin.on_statement_finished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Plugin.on_statement_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a statement has been completely executed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on error</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Plugin.on_tokenize">
<code class="descname">on_tokenize</code><span class="sig-paren">(</span><em>shell</em>, <em>tokens</em>, <em>origin</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Plugin.on_tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Plugin.on_tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after an input string has been tokenized. If this function
performs no preprocessing, return the tokens unmodified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>tokens</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; the list of <a class="reference internal" href="pypsi.cmdline.html#pypsi.cmdline.Token" title="pypsi.cmdline.Token"><code class="xref py py-class docutils literal"><span class="pre">pypsi.cmdline.Token</span></code></a> objects</li>
<li><strong>origin</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the origin of the input, can be either &#8216;input&#8217; if
received from a call to <cite>input()</cite> or &#8216;prompt&#8217; if the input is the
prompt to display to the user</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns list:</th><td class="field-body"><p class="first last">the list of preprocessed <a class="reference internal" href="pypsi.cmdline.html#pypsi.cmdline.Token" title="pypsi.cmdline.Token"><code class="xref py py-class docutils literal"><span class="pre">pypsi.cmdline.Token</span></code></a>
objects</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.Plugin.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>shell</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#Plugin.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.Plugin.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after the plugin has been registered to the active shell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on failure</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="argument-parsing">
<h2>6.3. Argument parsing<a class="headerlink" href="#argument-parsing" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypsi.core.PypsiArgParser">
<em class="property">class </em><code class="descclassname">pypsi.core.</code><code class="descname">PypsiArgParser</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3.3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">argparse.ArgumentParser</span></code></a></p>
<p>Customized <a class="reference external" href="http://docs.python.org/3.3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">argparse.ArgumentParser</span></code></a> for use in pypsi. This class
slightly modifies the base ArgumentParser so that the following occurs:</p>
<ul class="simple">
<li>The whole program does not exit on printing the help message or bad
arguments</li>
<li>Any error messages are intercepted and printed on the active shell&#8217;s
error stream</li>
<li>Adds the option to provide callbacks for tab-completing
options and parameters</li>
</ul>
<dl class="method">
<dt id="pypsi.core.PypsiArgParser.add_argument">
<code class="descname">add_argument</code><span class="sig-paren">(</span><em>*args</em>, <em>completer=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser.add_argument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser.add_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Override add_argument function of argparse.ArgumentParser to
handle callback functions.
:param args:   Positional arguments to pass up to argparse
:param function completer: Optional callback function for argument
:param kwargs: Keywork arguments to pass up to argparse
:return:</p>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.PypsiArgParser.get_option_completer">
<code class="descname">get_option_completer</code><span class="sig-paren">(</span><em>option</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser.get_option_completer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser.get_option_completer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the callback for the specified optional argument,
Or None if one was not specified.
:param str option: The Option
:return function: The callback function or None</p>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.PypsiArgParser.get_options">
<code class="descname">get_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser.get_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser.get_options" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">All optional arguments (ex, &#8216;-v&#8217;/&#8217;&#8211;verbose&#8217;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.PypsiArgParser.get_positional_arg_index">
<code class="descname">get_positional_arg_index</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser.get_positional_arg_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser.get_positional_arg_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the positional index of a cursor, based on
optional arguments and positional arguments
:param list args: List of str arguments from the Command Line
:return:</p>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.PypsiArgParser.get_positional_completer">
<code class="descname">get_positional_completer</code><span class="sig-paren">(</span><em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser.get_positional_completer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser.get_positional_completer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the callback for a positional parameter
:param pos: index of the parameter - first param&#8217;s index = 0
:return: The callback if it exists, else None</p>
</dd></dl>

<dl class="method">
<dt id="pypsi.core.PypsiArgParser.has_value">
<code class="descname">has_value</code><span class="sig-paren">(</span><em>arg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#PypsiArgParser.has_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.PypsiArgParser.has_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the optional argument has a value associated with it.
:param str arg: Optional argument to check
:return: True if arg has a value, false otherwise</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pypsi.core.CommandShortCircuit">
<em class="property">class </em><code class="descclassname">pypsi.core.</code><code class="descname">CommandShortCircuit</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsi/core.html#CommandShortCircuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.core.CommandShortCircuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3.3/library/exceptions.html#Exception" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></a></p>
<p>Exception raised when the user enter invalid arguments or requests usage
information via the -h and &#8211;help flags.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; the code the command should return</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="enhanced-printing">
<h2>6.4. Enhanced Printing<a class="headerlink" href="#enhanced-printing" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pypsi.cmdline.html" title="7. pypsi.cmdline - User input processing"
             >next</a> |</li>
        <li class="right" >
          <a href="pypsi.completers.html" title="5. pypsi.completers - Core tab completion functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypsi 1.4.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Adam Meily.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>
  </body>
</html>